<!doctype html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Diamond Bonus</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://sad.adsgram.ai/js/sad.min.js"></script>

<style>
body{
margin:0;
font-family:system-ui;
background:#f2f4ff;
display:flex;
justify-content:center;
align-items:center;
height:100vh
}
.app{
width:100%;
max-width:380px;
background:#fff;
border-radius:20px;
padding:20px;
box-shadow:0 10px 30px rgba(0,0,0,.1)
}
h1{
margin:0 0 10px;
font-size:20px;
text-align:center
}
.balance{
font-size:32px;
text-align:center;
margin:15px 0
}
button{
width:100%;
padding:14px;
border:none;
border-radius:14px;
font-size:16px;
font-weight:600;
cursor:pointer
}
.free{
background:#4caf50;
color:#fff;
margin-bottom:12px
}
.ad{
background:#667eea;
color:#fff
}
.info{
margin-top:10px;
font-size:12px;
color:#666;
text-align:center
}
</style>
</head>

<body>
<div class="app">
<h1>ğŸ’ Diamond Bonus</h1>

<div class="balance">
ğŸ’ <span id="bal">0</span>
</div>

<button class="free" id="freeBtn">
ğŸ Kunlik bepul bonus
</button>

<button class="ad" id="adBtn">
â–¶ï¸ Bonus olish (ixtiyoriy)
</button>

<div class="info">
Reklama koâ€˜rish majburiy emas. <br>
Reklama â€” faqat qoâ€˜shimcha bonus uchun.
</div>
</div>

<script>
var ADSGRAM_BLOCK_ID = "18961"
var balance = 0
var todayAds = 0
var adCtrl = null
var userId = null

function todayKey(k){
var d=new Date().toISOString().slice(0,10)
return k+"_"+d+"_"+userId
}

function load(){
balance=parseInt(localStorage.getItem("bal_"+userId)||"0")
todayAds=parseInt(localStorage.getItem(todayKey("ads"))||"0")
document.getElementById("bal").textContent=balance
}

function save(){
localStorage.setItem("bal_"+userId,balance)
localStorage.setItem(todayKey("ads"),todayAds)
}

function toast(t){
Telegram.WebApp.showAlert(t)
}

function initAds(){
if(!window.Adsgram)return
adCtrl=Adsgram.init({blockId:ADSGRAM_BLOCK_ID})
adCtrl.addEventListener("onReward",function(){
balance+=1
todayAds+=1
save()
load()
toast("ğŸ‰ Bonus qoâ€˜shildi!")
})
}

document.getElementById("freeBtn").onclick=function(){
var k=todayKey("free")
if(localStorage.getItem(k)){
toast("Bugun bepul bonus olgansiz")
return
}
balance+=1
localStorage.setItem(k,"1")
save()
load()
toast("ğŸ Bepul bonus berildi")
}

document.getElementById("adBtn").onclick=function(){
if(todayAds>=10){
toast("Bugungi reklama limiti tugadi")
return
}
if(!adCtrl){
toast("Reklama hozir mavjud emas")
return
}
adCtrl.show()
}

if(window.Telegram && Telegram.WebApp){
Telegram.WebApp.ready()
var u=Telegram.WebApp.initDataUnsafe.user
if(!u){
toast("Telegram ichida oching")
}else{
userId=u.id
load()
initAds()
}
}
</script>
</body>
</html>
