<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RekchiAI Bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: #18222d;
            color: white;
            min-height: 100vh;
        }

        .screen {
            display: none;
            min-height: 100vh;
        }

        .screen.active {
            display: block;
        }

        /* Chat-like Interface */
        .chat-container {
            padding: 10px;
            max-width: 500px;
            margin: 0 auto;
        }

        .message {
            margin: 10px 0;
            padding: 12px 16px;
            border-radius: 18px;
            max-width: 85%;
            word-wrap: break-word;
        }

        .bot-message {
            background: #2a3942;
            border-bottom-left-radius: 5px;
            align-self: flex-start;
        }

        .user-message {
            background: #005c4b;
            border-bottom-right-radius: 5px;
            align-self: flex-end;
            margin-left: auto;
        }

        .message-group {
            display: flex;
            flex-direction: column;
        }

        /* Keyboard */
        .keyboard {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #1e2a35;
            border-top: 1px solid #2a3942;
            padding: 10px;
        }

        .keyboard-row {
            display: flex;
            gap: 5px;
            margin-bottom: 5px;
        }

        .keyboard-btn {
            flex: 1;
            background: #2a3942;
            border: none;
            color: white;
            padding: 12px 8px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        .keyboard-btn:active {
            background: #3d4f5c;
        }

        /* Loading */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px 16px;
            background: #2a3942;
            border-radius: 18px;
            border-bottom-left-radius: 5px;
            max-width: fit-content;
            margin: 10px 0;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #8696a0;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        /* Service Cards */
        .service-card {
            background: #2a3942;
            border-radius: 12px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: background 0.2s;
        }

        .service-card:active {
            background: #3d4f5c;
        }

        .service-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .service-icon {
            font-size: 24px;
        }

        .service-title {
            font-weight: 600;
            font-size: 16px;
        }

        .service-desc {
            font-size: 14px;
            color: #8696a0;
            margin-bottom: 10px;
        }

        .service-price {
            font-size: 14px;
            color: #00a884;
        }

        /* Package Selection */
        .package-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin: 15px 0;
        }

        .package {
            background: #2a3942;
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .package.selected {
            border-color: #00a884;
            background: rgba(0, 168, 132, 0.1);
        }

        .package-amount {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .package-price {
            font-size: 14px;
            color: #00a884;
        }

        /* Balance */
        .balance-display {
            background: #2a3942;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            display: flex;
            justify-content: space-around;
        }

        .balance-item {
            text-align: center;
        }

        .balance-amount {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .balance-label {
            font-size: 12px;
            color: #8696a0;
        }

        /* Input */
        .input-group {
            background: #2a3942;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
        }

        .input-field {
            width: 100%;
            background: #1e2a35;
            border: 1px solid #3d4f5c;
            border-radius: 8px;
            padding: 12px;
            color: white;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .input-field::placeholder {
            color: #8696a0;
        }

        .btn {
            background: #00a884;
            border: none;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            width: 100%;
            transition: background 0.2s;
        }

        .btn:active {
            background: #008f70;
        }

        .btn-secondary {
            background: #2a3942;
        }

        .btn-secondary:active {
            background: #3d4f5c;
        }

        /* Tutorial Videos */
        .video-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .video-item {
            background: #2a3942;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
        }

        .video-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .video-icon {
            font-size: 20px;
            color: #00a884;
        }

        .video-title {
            font-weight: 600;
            font-size: 15px;
        }

        .video-desc {
            font-size: 13px;
            color: #8696a0;
            line-height: 1.4;
        }

        /* Promo Code */
        .promo-result {
            background: #2a3942;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }

        .promo-success {
            color: #00a884;
        }

        .promo-error {
            color: #f15c6d;
        }

        /* Animation */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message, .service-card, .package, .video-item {
            animation: slideIn 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- Asosiy Chat Screen -->
    <div id="main-chat" class="screen active">
        <div class="chat-container">
            <div class="message-group">
                <div class="message bot-message">
                    ü§ñ RekchiAI botiga xush kelibsiz!<br><br>
                    Instagram videolaringizga ko'rishlar, likelar va jo'natishlar xizmatlarimizdan foydalaning.
                </div>
                
                <div class="balance-display">
                    <div class="balance-item">
                        <div class="balance-amount" id="main-diamonds">150</div>
                        <div class="balance-label">üíé Olmos</div>
                    </div>
                    <div class="balance-item">
                        <div class="balance-amount" id="main-coins">80</div>
                        <div class="balance-label">ü™ô Tanga</div>
                    </div>
                </div>

                <div class="service-card" onclick="showService('views')">
                    <div class="service-header">
                        <div class="service-icon">üëÅ</div>
                        <div class="service-title">Ko'rishlar xizmati</div>
                    </div>
                    <div class="service-desc">Instagram videolaringizga ko'rishlar qo'shing</div>
                    <div class="service-price">1000 ta = 10 üíé</div>
                </div>

                <div class="service-card" onclick="showService('likes')">
                    <div class="service-header">
                        <div class="service-icon">‚ù§Ô∏è</div>
                        <div class="service-title">Like xizmati</div>
                    </div>
                    <div class="service-desc">Videolaringizga likelar qo'shing</div>
                    <div class="service-price">100 ta = 10 ü™ô</div>
                </div>

                <div class="service-card" onclick="showService('shipments')">
                    <div class="service-header">
                        <div class="service-icon">üöÄ</div>
                        <div class="service-title">Jo'natishlar</div>
                    </div>
                    <div class="service-desc">Videolaringizni jo'nating</div>
                    <div class="service-price">100 ta = 3 ü™ô</div>
                </div>
            </div>
        </div>

        <div class="keyboard">
            <div class="keyboard-row">
                <button class="keyboard-btn" onclick="showScreen('shop')">üõí Do'kon</button>
                <button class="keyboard-btn" onclick="showScreen('earn')">üíé Olmos yeg'ish</button>
            </div>
            <div class="keyboard-row">
                <button class="keyboard-btn" onclick="showScreen('promo')">üéÅ Promokod</button>
                <button class="keyboard-btn" onclick="showScreen('tutorials')">üé¨ Video darslik</button>
            </div>
            <div class="keyboard-row">
                <button class="keyboard-btn" onclick="showScreen('profile')">üë§ Profil</button>
                <button class="keyboard-btn" onclick="showScreen('help')">‚ùì Yordam</button>
            </div>
        </div>
    </div>

    <!-- Ko'rishlar Xizmati -->
    <div id="views-service" class="screen">
        <div class="chat-container">
            <div class="message-group">
                <div class="message bot-message">
                    üëÅ <b>Ko'rishlar xizmati</b><br><br>
                    Instagram videolaringizga ko'rishlar qo'shing. Quyidagi paketlardan birini tanlang yoki o'zingiz miqdor kiriting.
                </div>

                <div class="package-grid">
                    <div class="package" onclick="selectPackage('views', 1000, 10)">
                        <div class="package-amount">1,000</div>
                        <div class="package-price">10 üíé</div>
                    </div>
                    <div class="package" onclick="selectPackage('views', 5000, 45)">
                        <div class="package-amount">5,000</div>
                        <div class="package-price">45 üíé</div>
                    </div>
                    <div class="package" onclick="selectPackage('views', 10000, 90)">
                        <div class="package-amount">10,000</div>
                        <div class="package-price">90 üíé</div>
                    </div>
                    <div class="package" onclick="selectPackage('views', 20000, 170)">
                        <div class="package-amount">20,000</div>
                        <div class="package-price">170 üíé</div>
                    </div>
                </div>

                <div class="input-group">
                    <input type="number" class="input-field" id="custom-views" placeholder="Boshqa miqdor (min: 1000)">
                    <button class="btn" onclick="calculateCustomViews()">Hisoblash</button>
                </div>

                <div id="views-result" style="display: none;">
                    <div class="message bot-message">
                        üìä <b>Buyurtma tafsilotlari:</b><br>
                        ‚Ä¢ Ko'rishlar: <span id="result-views">0</span> ta<br>
                        ‚Ä¢ Narxi: <span id="result-price">0</span> üíé<br>
                        ‚Ä¢ Yetkazish: <span id="delivery-time">45 daqiqa</span>
                    </div>
                    <button class="btn" onclick="confirmOrder('views')">‚úÖ Buyurtma berish</button>
                </div>
            </div>
        </div>

        <div class="keyboard">
            <button class="keyboard-btn btn-secondary" onclick="showScreen('main-chat')">‚¨ÖÔ∏è Ortga</button>
        </div>
    </div>

    <!-- Like Xizmati -->
    <div id="likes-service" class="screen">
        <div class="chat-container">
            <div class="message-group">
                <div class="message bot-message">
                    ‚ù§Ô∏è <b>Like xizmati</b><br><br>
                    Instagram videolaringizga likelar qo'shing.
                </div>

                <div class="package-grid">
                    <div class="package" onclick="selectPackage('likes', 100, 10)">
                        <div class="package-amount">100</div>
                        <div class="package-price">10 ü™ô</div>
                    </div>
                    <div class="package" onclick="selectPackage('likes', 500, 45)">
                        <div class="package-amount">500</div>
                        <div class="package-price">45 ü™ô</div>
                    </div>
                    <div class="package" onclick="selectPackage('likes', 1000, 80)">
                        <div class="package-amount">1,000</div>
                        <div class="package-price">80 ü™ô</div>
                    </div>
                </div>

                <div class="input-group">
                    <input type="number" class="input-field" id="custom-likes" placeholder="Boshqa miqdor (min: 50)">
                    <button class="btn" onclick="calculateCustomLikes()">Hisoblash</button>
                </div>

                <div id="likes-result" style="display: none;">
                    <div class="message bot-message">
                        üìä <b>Buyurtma tafsilotlari:</b><br>
                        ‚Ä¢ Likelar: <span id="result-likes">0</span> ta<br>
                        ‚Ä¢ Narxi: <span id="result-likes-price">0</span> ü™ô<br>
                        ‚Ä¢ Yetkazish: <span>1 soat</span>
                    </div>
                    <button class="btn" onclick="confirmOrder('likes')">‚úÖ Buyurtma berish</button>
                </div>
            </div>
        </div>

        <div class="keyboard">
            <button class="keyboard-btn btn-secondary" onclick="showScreen('main-chat')">‚¨ÖÔ∏è Ortga</button>
        </div>
    </div>

    <!-- Do'kon -->
    <div id="shop" class="screen">
        <div class="chat-container">
            <div class="message-group">
                <div class="message bot-message">
                    üõí <b>Do'kon</b><br><br>
                    Olmos va tanga sotib oling.
                </div>

                <div class="service-card" onclick="selectShopItem('diamonds', 50, 5000)">
                    <div class="service-header">
                        <div class="service-icon">üíé</div>
                        <div class="service-title">50 Olmos</div>
                    </div>
                    <div class="service-desc">Instagram ko'rishlar uchun</div>
                    <div class="service-price">5,000 so'm</div>
                </div>

                <div class="service-card" onclick="selectShopItem('diamonds', 100, 9000)">
                    <div class="service-header">
                        <div class="service-icon">üíé</div>
                        <div class="service-title">100 Olmos</div>
                    </div>
                    <div class="service-desc">Instagram ko'rishlar uchun</div>
                    <div class="service-price">9,000 so'm</div>
                </div>

                <div class="service-card" onclick="selectShopItem('diamonds', 300, 25000)">
                    <div class="service-header">
                        <div class="service-icon">üíé</div>
                        <div class="service-title">300 Olmos</div>
                    </div>
                    <div class="service-desc">Instagram ko'rishlar uchun</div>
                    <div class="service-price">25,000 so'm</div>
                </div>

                <div class="service-card" onclick="selectShopItem('coins', 50, 6000)">
                    <div class="service-header">
                        <div class="service-icon">ü™ô</div>
                        <div class="service-title">50 Tanga</div>
                    </div>
                    <div class="service-desc">Like va obunachilar uchun</div>
                    <div class="service-price">6,000 so'm</div>
                </div>

                <div class="service-card" onclick="selectShopItem('coins', 100, 11000)">
                    <div class="service-header">
                        <div class="service-icon">ü™ô</div>
                        <div class="service-title">100 Tanga</div>
                    </div>
                    <div class="service-desc">Like va obunachilar uchun</div>
                    <div class="service-price">11,000 so'm</div>
                </div>
            </div>
        </div>

        <div class="keyboard">
            <button class="keyboard-btn btn-secondary" onclick="showScreen('main-chat')">‚¨ÖÔ∏è Ortga</button>
        </div>
    </div>

    <!-- Olmos Yeg'ish -->
    <div id="earn" class="screen">
        <div class="chat-container">
            <div class="message-group">
                <div class="message bot-message">
                    üíé <b>Olmos yeg'ish</b><br><br>
                    Do'stlaringizni taklif qiling va har biri uchun 15 olmos oling!
                </div>

                <div class="message bot-message">
                    üë´ <b>Sizning referal havolangiz:</b><br>
                    <div class="referral-link">https://t.me/RekchiAi_bot?start=123456</div>
                </div>

                <div class="balance-display">
                    <div class="balance-item">
                        <div class="balance-amount" id="total-refs">3</div>
                        <div class="balance-label">Jami taklif</div>
                    </div>
                    <div class="balance-item">
                        <div class="balance-amount" id="confirmed-refs">2</div>
                        <div class="balance-label">Tasdiqlangan</div>
                    </div>
                </div>

                <button class="btn" onclick="copyReferralLink()">üìã Havolani nusxalash</button>
            </div>
        </div>

        <div class="keyboard">
            <button class="keyboard-btn btn-secondary" onclick="showScreen('main-chat')">‚¨ÖÔ∏è Ortga</button>
        </div>
    </div>

    <!-- Video Darsliklar -->
    <div id="tutorials" class="screen">
        <div class="chat-container">
            <div class="message-group">
                <div class="message bot-message">
                    üé¨ <b>Video darsliklar</b><br><br>
                    Botdan qanday foydalanishni o'rganing.
                </div>

                <div class="video-item" onclick="playVideo('qollanma')">
                    <div class="video-header">
                        <div class="video-icon">üì±</div>
                        <div class="video-title">Botdan foydalanish qo'llanmasi</div>
                    </div>
                    <div class="video-desc">RekchiAI botidan to'liq foydalanish bo'yicha video darslik</div>
                </div>

                <div class="video-item" onclick="playVideo('views')">
                    <div class="video-header">
                        <div class="video-icon">üëÅ</div>
                        <div class="video-title">Ko'rishlar qo'shish</div>
                    </div>
                    <div class="video-desc">Instagram videolaringizga ko'rishlar qanday qo'shiladi</div>
                </div>

                <div class="video-item" onclick="playVideo('likes')">
                    <div class="video-header">
                        <div class="video-icon">‚ù§Ô∏è</div>
                        <div class="video-title">Likelar qo'shish</div>
                    </div>
                    <div class="video-desc">Videolaringizga likelar qanday qo'shiladi</div>
                </div>

                <div class="video-item" onclick="playVideo('referral')">
                    <div class="video-header">
                        <div class="video-icon">üë´</div>
                        <div class="video-title">Referal tizimi</div>
                    </div>
                    <div class="video-desc">Do'stlaringizni taklif qilib olmos yeg'ish</div>
                </div>
            </div>
        </div>

        <div class="keyboard">
            <button class="keyboard-btn btn-secondary" onclick="showScreen('main-chat')">‚¨ÖÔ∏è Ortga</button>
        </div>
    </div>

    <!-- Promokod -->
    <div id="promo" class="screen">
        <div class="chat-container">
            <div class="message-group">
                <div class="message bot-message">
                    üéÅ <b>Promokod</b><br><br>
                    Promokod kiriting va bonus oling.
                </div>

                <div class="input-group">
                    <input type="text" class="input-field" id="promo-code" placeholder="Promokodni kiriting" style="text-transform: uppercase;">
                    <button class="btn" onclick="activatePromo()">Faollashtirish</button>
                </div>

                <div id="promo-result" class="promo-result" style="display: none;">
                    <div id="promo-message"></div>
                </div>
            </div>
        </div>

        <div class="keyboard">
            <button class="keyboard-btn btn-secondary" onclick="showScreen('main-chat')">‚¨ÖÔ∏è Ortga</button>
        </div>
    </div>

    <!-- Profil -->
    <div id="profile" class="screen">
        <div class="chat-container">
            <div class="message-group">
                <div class="message bot-message">
                    üë§ <b>Profil</b>
                </div>

                <div class="balance-display">
                    <div class="balance-item">
                        <div class="balance-amount" id="profile-diamonds">150</div>
                        <div class="balance-label">üíé Olmos</div>
                    </div>
                    <div class="balance-item">
                        <div class="balance-amount" id="profile-coins">80</div>
                        <div class="balance-label">ü™ô Tanga</div>
                    </div>
                </div>

                <div class="message bot-message">
                    üìä <b>Statistika:</b><br>
                    ‚Ä¢ Buyurtmalar: <span id="profile-orders">5</span> ta<br>
                    ‚Ä¢ Referallar: <span id="profile-refs">3</span> ta<br>
                    ‚Ä¢ Faollik: <span>7 kun</span>
                </div>
            </div>
        </div>

        <div class="keyboard">
            <button class="keyboard-btn btn-secondary" onclick="showScreen('main-chat')">‚¨ÖÔ∏è Ortga</button>
        </div>
    </div>

    <script>
        // Telegram Web App initialization
        let tg = window.Telegram.WebApp;
        let currentOrder = null;
        let currentShopItem = null;

        // Mock user data
        const userData = {
            diamonds: 150,
            coins: 80,
            username: "foydalanuvchi",
            userId: 123456789,
            totalOrders: 5,
            totalRefs: 3,
            confirmedRefs: 2
        };

        // Initialize the app
        tg.expand();
        tg.ready();
        updateBalances();

        // Screen navigation
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function showService(serviceType) {
            showScreen(serviceType + '-service');
        }

        // Update balances
        function updateBalances() {
            document.getElementById('main-diamonds').textContent = userData.diamonds;
            document.getElementById('main-coins').textContent = userData.coins;
            document.getElementById('profile-diamonds').textContent = userData.diamonds;
            document.getElementById('profile-coins').textContent = userData.coins;
            document.getElementById('profile-orders').textContent = userData.totalOrders;
            document.getElementById('profile-refs').textContent = userData.totalRefs;
            document.getElementById('total-refs').textContent = userData.totalRefs;
            document.getElementById('confirmed-refs').textContent = userData.confirmedRefs;
        }

        // Package selection
        function selectPackage(type, amount, price) {
            currentOrder = { type, amount, price };
            
            // Remove selected class from all packages
            document.querySelectorAll('.package').forEach(pkg => {
                pkg.classList.remove('selected');
            });
            
            // Add selected class to clicked package
            event.currentTarget.classList.add('selected');
            
            // Show result section
            const resultDiv = document.getElementById(`${type}-result`);
            resultDiv.style.display = 'block';
            
            // Update result info
            document.getElementById(`result-${type}`).textContent = amount.toLocaleString();
            document.getElementById(`result-price`).textContent = price;
            
            // Calculate delivery time
            const deliveryTime = calculateDeliveryTime(amount);
            document.getElementById('delivery-time').textContent = deliveryTime;
        }

        // Custom calculations
        function calculateCustomViews() {
            const amount = parseInt(document.getElementById('custom-views').value);
            if (amount < 1000) {
                showMessage('Minimal miqdor: 1000 ta');
                return;
            }
            
            const price = Math.ceil(amount * 0.01);
            selectPackage('views', amount, price);
        }

        function calculateCustomLikes() {
            const amount = parseInt(document.getElementById('custom-likes').value);
            if (amount < 50) {
                showMessage('Minimal miqdor: 50 ta');
                return;
            }
            
            const price = Math.ceil(amount / 10);
            selectPackage('likes', amount, price);
        }

        // Delivery time calculation
        function calculateDeliveryTime(amount) {
            const viewsPerHour = 13000;
            const hours = Math.ceil(amount / viewsPerHour);
            
            if (hours <= 1) {
                return "45 daqiqa ichida";
            } else {
                return `${hours} soat ichida`;
            }
        }

        // Order confirmation
        function confirmOrder(type) {
            if (!currentOrder) {
                showMessage('Iltimos, avval miqdorni tanlang!');
                return;
            }
            
            const balance = type === 'views' ? userData.diamonds : userData.coins;
            
            if (balance < currentOrder.price) {
                showMessage('Yetarli mablag\' mavjud emas!');
                return;
            }
            
            // Mock successful order
            if (type === 'views') {
                userData.diamonds -= currentOrder.price;
            } else {
                userData.coins -= currentOrder.price;
            }
            userData.totalOrders++;
            
            updateBalances();
            showMessage(`‚úÖ ${currentOrder.amount.toLocaleString()} ta ${getServiceName(type)} buyurtmasi qabul qilindi!`);
            showScreen('main-chat');
        }

        function getServiceName(type) {
            const names = {
                'views': 'ko\'rish',
                'likes': 'like'
            };
            return names[type] || 'xizmat';
        }

        // Shop item selection
        function selectShopItem(type, amount, price) {
            currentShopItem = { type, amount, price };
            tg.showPopup({
                title: `${amount} ${type === 'diamonds' ? 'üíé Olmos' : 'ü™ô Tanga'}`,
                message: `Narxi: ${price.toLocaleString()} so'm\n\nTo'lov qilish uchun admin bilan bog'laning.`,
                buttons: [
                    {id: 'contact', type: 'default', text: 'üìû Admin bilan bog\'lanish'},
                    {id: 'cancel', type: 'cancel', text: '‚ùå Bekor qilish'}
                ]
            }, (buttonId) => {
                if (buttonId === 'contact') {
                    tg.openTelegramLink('https://t.me/Behruzxan');
                }
            });
        }

        // Referral link copy
        function copyReferralLink() {
            const link = 'https://t.me/RekchiAi_bot?start=' + userData.userId;
            navigator.clipboard.writeText(link).then(() => {
                showMessage('‚úÖ Havola nusxalandi!');
            });
        }

        // Promo code activation
        function activatePromo() {
            const code = document.getElementById('promo-code').value.toUpperCase();
            if (!code) {
                showMessage('Iltimos, promokodni kiriting!');
                return;
            }
            
            const resultDiv = document.getElementById('promo-result');
            const messageDiv = document.getElementById('promo-message');
            
            resultDiv.style.display = 'block';
            
            if (code === 'SALOM2024') {
                userData.diamonds += 25;
                messageDiv.innerHTML = 'üéâ Tabriklaymiz!<br>+25 üíé olmos berildi!';
                messageDiv.className = 'promo-success';
                updateBalances();
            } else if (code === 'TANGA50') {
                userData.coins += 50;
                messageDiv.innerHTML = 'üéâ Tabriklaymiz!<br>+50 ü™ô tanga berildi!';
                messageDiv.className = 'promo-success';
                updateBalances();
            } else {
                messageDiv.innerHTML = '‚ùå Noto\'g\'ri promokod!';
                messageDiv.className = 'promo-error';
            }
        }

        // Video player
        function playVideo(videoType) {
            const videos = {
                'qollanma': 'Botdan foydalanish qo\'llanmasi',
                'views': 'Ko\'rishlar qo\'shish',
                'likes': 'Likelar qo\'shish',
                'referral': 'Referal tizimi'
            };
            
            tg.showPopup({
                title: 'üé¨ ' + videos[videoType],
                message: 'Video darslik Telegram kanalimizda mavjud.',
                buttons: [
                    {id: 'watch', type: 'default', text: 'üì∫ Ko\'rish'},
                    {id: 'cancel', type: 'cancel', text: '‚ùå Yopish'}
                ]
            }, (buttonId) => {
                if (buttonId === 'watch') {
                    tg.openTelegramLink('https://t.me/rekchi_tv');
                }
            });
        }

        // Utility function to show messages
        function showMessage(text) {
            tg.showPopup({
                title: 'Xabar',
                message: text,
                buttons: [{id: 'ok', type: 'default', text: 'OK'}]
            });
        }
    </script>
</body>
</html>
